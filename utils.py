from yandex_gpt import yandex_gpt
from typing import List, Dict, Tuple, Optional, Any
import random
import json
import os
from datetime import datetime, date
from database import User

# –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å file_id
FILE_IDS = {}

def load_file_ids():
    """–ó–∞–≥—Ä—É–∑–∏—Ç—å file_ids –∏–∑ JSON —Ñ–∞–π–ª–∞"""
    global FILE_IDS
    try:
        with open('file_ids.json', 'r', encoding='utf-8') as f:
            FILE_IDS = json.load(f)
            print(f"‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ {len(FILE_IDS)} file_id –∏–∑ file_ids.json")
            return FILE_IDS
    except FileNotFoundError:
        print("‚ö†Ô∏è file_ids.json –Ω–µ –Ω–∞–π–¥–µ–Ω. –ó–∞–ø—É—Å—Ç–∏—Ç–µ upload_images.py")
        return {}
    except json.JSONDecodeError:
        print("‚ö†Ô∏è –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è file_ids.json")
        return {}

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
load_file_ids()

# –í–∞—à–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è...

# –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å file_id
def get_card_file_id(card_name: str):
    """–ü–æ–ª—É—á–∏—Ç—å file_id –∏–ª–∏ –ø—É—Ç—å –∫ –∫–∞—Ä—Ç–∏–Ω–∫–µ –∫–∞—Ä—Ç—ã"""
    # –ü—Ä—è–º–æ–π –ø–æ–∏—Å–∫
    if card_name in FILE_IDS:
        return FILE_IDS[card_name]
    
    # –ü–æ–∏—Å–∫ –±–µ–∑ —É—á–µ—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞ –∏ –ø—Ä–æ–±–µ–ª–æ–≤
    card_name_clean = card_name.lower().replace(' ', '').replace('-', '').replace('_', '')
    
    for key in FILE_IDS:
        key_clean = key.lower().replace(' ', '').replace('-', '').replace('_', '')
        if card_name_clean == key_clean:
            return FILE_IDS[key]
    
    # Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª
    return get_card_image_path(card_name)

def get_reading_type_file_id(reading_type: str):
    """–ü–æ–ª—É—á–∏—Ç—å file_id –∏–ª–∏ –ø—É—Ç—å –¥–ª—è —Ç–∏–ø–∞ –≥–∞–¥–∞–Ω–∏—è"""
    if reading_type in FILE_IDS:
        return FILE_IDS[reading_type]
    
    # Fallback
    return get_reading_type_image(reading_type)

MAJOR_ARCANA_NAMES = ["–®—É—Ç", "–ú–∞–≥", "–í–µ—Ä—Ö–æ–≤–Ω–∞—è –ñ—Ä–∏—Ü–∞", "–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞", "–ò–º–ø–µ—Ä–∞—Ç–æ—Ä", 
                      "–ò–µ—Ä–æ—Ñ–∞–Ω—Ç", "–í–ª—é–±–ª–µ–Ω–Ω—ã–µ", "–ö–æ–ª–µ—Å–Ω–∏—Ü–∞", "–°–∏–ª–∞", "–û—Ç—à–µ–ª—å–Ω–∏–∫",
                      "–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã", "–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å", "–ü–æ–≤–µ—à–µ–Ω–Ω—ã–π", "–°–º–µ—Ä—Ç—å",
                      "–£–º–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å", "–î—å—è–≤–æ–ª", "–ë–∞—à–Ω—è", "–ó–≤–µ–∑–¥–∞", "–õ—É–Ω–∞", "–°–æ–ª–Ω—Ü–µ",
                      "–°—É–¥", "–ú–∏—Ä"]
# –ö–∞—Ä—Ç—ã –¢–∞—Ä–æ (–æ—Å–Ω–æ–≤–Ω–æ–π –Ω–∞–±–æ—Ä)
TAROT_CARDS = [
    # ========== –°–¢–ê–†–®–ò–ï –ê–†–ö–ê–ù–´ (22 –∫–∞—Ä—Ç—ã) ==========
    {"id": 0, "name": "–®—É—Ç", "upright": "–ù–∞—á–∞–ª–æ –ø—É—Ç–∏, —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ—Å—Ç—å, —Å–≤–æ–±–æ–¥–∞", "reversed": "–ë–µ–∑—Ä–∞—Å—Å—É–¥—Å—Ç–≤–æ, —Ä–∏—Å–∫, –Ω–µ–∑—Ä–µ–ª–æ—Å—Ç—å"},
    {"id": 1, "name": "–ú–∞–≥", "upright": "–°–∏–ª–∞ –≤–æ–ª–∏, –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ, –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è", "reversed": "–û–±–º–∞–Ω, –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏, —Å–ª–∞–±–æ—Å—Ç—å"},
    {"id": 2, "name": "–í–µ—Ä—Ö–æ–≤–Ω–∞—è –ñ—Ä–∏—Ü–∞", "upright": "–ò–Ω—Ç—É–∏—Ü–∏—è, —Ç–∞–π–Ω—ã, –ø–æ–¥—Å–æ–∑–Ω–∞–Ω–∏–µ", "reversed": "–°–∫—Ä—ã—Ç—ã–µ –º–æ—Ç–∏–≤—ã, –ø–æ–¥–∞–≤–ª–µ–Ω–Ω–∞—è –∏–Ω—Ç—É–∏—Ü–∏—è"},
    {"id": 3, "name": "–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞", "upright": "–ò–∑–æ–±–∏–ª–∏–µ, –ø—Ä–∏—Ä–æ–¥–∞, –ø–ª–æ–¥–æ—Ä–æ–¥–∏–µ, –∫—Ä–∞—Å–æ—Ç–∞", "reversed": "–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, —Ä–∞—Å—Ç–æ—á–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –±–µ–∑–¥–µ–π—Å—Ç–≤–∏–µ"},
    {"id": 4, "name": "–ò–º–ø–µ—Ä–∞—Ç–æ—Ä", "upright": "–í–ª–∞—Å—Ç—å, –∫–æ–Ω—Ç—Ä–æ–ª—å, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å", "reversed": "–¢–∏—Ä–∞–Ω–∏—è, –∂–µ—Å—Ç–∫–æ—Å—Ç—å, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã"},
    {"id": 5, "name": "–ò–µ—Ä–æ—Ñ–∞–Ω—Ç", "upright": "–¢—Ä–∞–¥–∏—Ü–∏–∏, –¥—É—Ö–æ–≤–Ω–æ—Å—Ç—å, –≤–µ—Ä–∞, –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ", "reversed": "–î–æ–≥–º–∞—Ç–∏–∑–º, –ª–∏—Ü–µ–º–µ—Ä–∏–µ, –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ"},
    {"id": 6, "name": "–í–ª—é–±–ª–µ–Ω–Ω—ã–µ", "upright": "–õ—é–±–æ–≤—å, –≥–∞—Ä–º–æ–Ω–∏—è, –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ, –≤—ã–±–æ—Ä", "reversed": "–†–∞–∑–ª–∞–¥, –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, –Ω–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä"},
    {"id": 7, "name": "–ö–æ–ª–µ—Å–Ω–∏—Ü–∞", "upright": "–ü–æ–±–µ–¥–∞, –∫–æ–Ω—Ç—Ä–æ–ª—å, –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥, –≤–æ–ª—è", "reversed": "–ü–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç—Ä–æ–ª—è, –∞–≤–∞—Ä–∏—è, –∑–∞—Å—Ç–æ–π"},
    {"id": 8, "name": "–°–∏–ª–∞", "upright": "–°–º–µ–ª–æ—Å—Ç—å, —Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ, –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–∏–ª–∞, —Ç–µ—Ä–ø–µ–Ω–∏–µ", "reversed": "–°–ª–∞–±–æ—Å—Ç—å, –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Å–∏–ª–æ–π"},
    {"id": 9, "name": "–û—Ç—à–µ–ª—å–Ω–∏–∫", "upright": "–†–∞–∑–º—ã—à–ª–µ–Ω–∏—è, –ø–æ–∏—Å–∫ –∏—Å—Ç–∏–Ω—ã, –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ, –º—É–¥—Ä–æ—Å—Ç—å", "reversed": "–ò–∑–æ–ª—è—Ü–∏—è, –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ, –æ—Ç–∫–∞–∑ –æ—Ç –ø–æ–º–æ—â–∏"},
    {"id": 10, "name": "–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã", "upright": "–°—É–¥—å–±–∞, —Ü–∏–∫–ª—ã, —É–¥–∞—á–∞, –ø–µ—Ä–µ–º–µ–Ω—ã", "reversed": "–ù–µ—É–¥–∞—á–∏, —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–∞–º, –ø–ª–æ—Ö–æ–π –ø–µ—Ä–∏–æ–¥"},
    {"id": 11, "name": "–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å", "upright": "–ü—Ä–∞–≤–æ—Å—É–¥–∏–µ, –∫–∞—Ä–º–∞, —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å", "reversed": "–ù–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å, –ø—Ä–µ–¥–≤–∑—è—Ç–æ—Å—Ç—å, –±–µ–∑–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å"},
    {"id": 12, "name": "–ü–æ–≤–µ—à–µ–Ω–Ω—ã–π", "upright": "–ñ–µ—Ä—Ç–≤–∞, –ø–µ—Ä–µ–æ—Ü–µ–Ω–∫–∞, —Å–¥–∞—á–∞, –Ω–æ–≤–∞—è –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞", "reversed": "–ë–µ–∑–¥–µ–π—Å—Ç–≤–∏–µ, –ø—Ä–æ–º–µ–¥–ª–µ–Ω–∏–µ, —ç–≥–æ–∏–∑–º"},
    {"id": 13, "name": "–°–º–µ—Ä—Ç—å", "upright": "–ö–æ–Ω–µ—Ü, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è, –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ, –ø–µ—Ä–µ—Ö–æ–¥", "reversed": "–ó–∞—Å—Ç–æ–π, —Å—Ç—Ä–∞—Ö –ø–µ—Ä–µ–º–µ–Ω, –º–µ–¥–ª–µ–Ω–Ω–∞—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è"},
    {"id": 14, "name": "–£–º–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å", "upright": "–ë–∞–ª–∞–Ω—Å, —Ç–µ—Ä–ø–µ–Ω–∏–µ, –≥–∞—Ä–º–æ–Ω–∏—è, –∏—Å—Ü–µ–ª–µ–Ω–∏–µ", "reversed": "–î–∏—Å–±–∞–ª–∞–Ω—Å, –Ω–µ—Ç–µ—Ä–ø–µ–Ω–∏–µ, —ç–∫—Å—Ç—Ä–µ–º–∏–∑–º"},
    {"id": 15, "name": "–î—å—è–≤–æ–ª", "upright": "–°–æ–±–ª–∞–∑–Ω, –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–º, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è", "reversed": "–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ, –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ –∏—Å–∫—É—à–µ–Ω–∏–π, —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ –ø—Ä–∞–≤–¥—ã"},
    {"id": 16, "name": "–ë–∞—à–Ω—è", "upright": "–í–Ω–µ–∑–∞–ø–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Ä–∞–∑—Ä—É—à–µ–Ω–∏–µ, –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ, –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ", "reversed": "–°—Ç—Ä–∞—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ, –æ—Ç—Å—Ä–æ—á–∫–∞ –Ω–µ–∏–∑–±–µ–∂–Ω–æ–≥–æ"},
    {"id": 17, "name": "–ó–≤–µ–∑–¥–∞", "upright": "–ù–∞–¥–µ–∂–¥–∞, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, –¥—É—Ö–æ–≤–Ω–æ—Å—Ç—å, –∏—Å—Ü–µ–ª–µ–Ω–∏–µ", "reversed": "–û—Ç—á–∞—è–Ω–∏–µ, –ø–æ—Ç–µ—Ä—è –≤–µ—Ä—ã, –ø–µ—Å—Å–∏–º–∏–∑–º"},
    {"id": 18, "name": "–õ—É–Ω–∞", "upright": "–ò–ª–ª—é–∑–∏–∏, –ø–æ–¥—Å–æ–∑–Ω–∞–Ω–∏–µ, –∏–Ω—Ç—É–∏—Ü–∏—è, —Ç–∞–π–Ω—ã", "reversed": "–°—Ç—Ä–∞—Ö–∏, –æ–±–º–∞–Ω, –ø—É—Ç–∞–Ω–∏—Ü–∞, –ø–æ–¥–∞–≤–ª–µ–Ω–Ω—ã–µ —ç–º–æ—Ü–∏–∏"},
    {"id": 19, "name": "–°–æ–ª–Ω—Ü–µ", "upright": "–†–∞–¥–æ—Å—Ç—å, —É—Å–ø–µ—Ö, –∂–∏–∑–Ω–µ–Ω–Ω–∞—è —Å–∏–ª–∞, –æ–ø—Ç–∏–º–∏–∑–º", "reversed": "–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏, –∑–∞–¥–µ—Ä–∂–∫–∏, –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏"},
    {"id": 20, "name": "–°—É–¥", "upright": "–í–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ, –ø—Ä–∏–∑—ã–≤, –ø—Ä–æ—â–µ–Ω–∏–µ, —Å—É–¥—å–±–∞", "reversed": "–°–æ–∂–∞–ª–µ–Ω–∏—è, –≤–∏–Ω–∞, —Å—Ç—Ä–∞—Ö –ø–µ—Ä–µ–º–µ–Ω, –æ—Ç–∫–∞–∑ –æ—Ç –ø—Ä–∏–∑—ã–≤–∞"},
    {"id": 21, "name": "–ú–∏—Ä", "upright": "–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ, –≥–∞—Ä–º–æ–Ω–∏—è, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ, –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ", "reversed": "–ù–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ—Å—Ç—å, –∑–∞–¥–µ—Ä–∂–∫–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è"},
    
    # ========== –ñ–ï–ó–õ–´ (–ü–û–°–û–•–ò) - 14 –∫–∞—Ä—Ç ==========
    {"id": 22, "name": "–¢—É–∑ –ñ–µ–∑–ª–æ–≤", "upright": "–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, –Ω–æ–≤—ã–µ –Ω–∞—á–∏–Ω–∞–Ω–∏—è, —ç–Ω–µ—Ä–≥–∏—è", "reversed": "–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–¥–µ–π, –∑–∞–¥–µ—Ä–∂–∫–∏, –ø–æ–¥–∞–≤–ª–µ–Ω–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è"},
    {"id": 23, "name": "–î–≤–æ–π–∫–∞ –ñ–µ–∑–ª–æ–≤", "upright": "–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –±—É–¥—É—â–µ–µ, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ, –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ", "reversed": "–°—Ç—Ä–∞—Ö –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ, –ø–ª–æ—Ö–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–∞–∑–æ–±—â–µ–Ω–Ω–æ—Å—Ç—å"},
    {"id": 24, "name": "–¢—Ä–æ–π–∫–∞ –ñ–µ–∑–ª–æ–≤", "upright": "–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ, —Ä–æ—Å—Ç, —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ, –ø—Ä–æ–≥—Ä–µ—Å—Å", "reversed": "–ó–∞–¥–µ—Ä–∂–∫–∏, –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è, —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ"},
    {"id": 25, "name": "–ß–µ—Ç–≤–µ—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤", "upright": "–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –ø—Ä–∞–∑–¥–Ω–∏–∫, –≥–∞—Ä–º–æ–Ω–∏—è, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è", "reversed": "–ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, –æ—Ç—Å—Ä–æ—á–∫–∞ —Ä–∞–¥–æ—Å—Ç–∏"},
    {"id": 26, "name": "–ü—è—Ç–µ—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤", "upright": "–ö–æ–Ω—Ñ–ª–∏–∫—Ç, —Å–æ–ø–µ—Ä–Ω–∏—á–µ—Å—Ç–≤–æ, –¥–µ–±–∞—Ç—ã, –≤—ã–∑–æ–≤", "reversed": "–ò–∑–±–µ–≥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞, –º–∏—Ä, –ø—Ä–∏–º–∏—Ä–µ–Ω–∏–µ"},
    {"id": 27, "name": "–®–µ—Å—Ç–µ—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤", "upright": "–ü–æ–±–µ–¥–∞, —É—Å–ø–µ—Ö, –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ, —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å", "reversed": "–ù–µ—É–¥–∞—á–∞, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏–∑–Ω–∞–Ω–∏—è, –∑–∞–Ω–∏–∂–µ–Ω–Ω–∞—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞"},
    {"id": 28, "name": "–°–µ–º–µ—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤", "upright": "–ó–∞—â–∏—Ç–∞, –Ω–∞—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, –æ—Ç—Å—Ç–∞–∏–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π", "reversed": "–°–¥–∞—á–∞, –ø–µ—Ä–µ—É—Ç–æ–º–ª–µ–Ω–∏–µ, –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–µ"},
    {"id": 29, "name": "–í–æ—Å—å–º–µ—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤", "upright": "–ë—ã—Å—Ç—Ä–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ, –¥–µ–π—Å—Ç–≤–∏–µ, –Ω–æ–≤–æ—Å—Ç–∏, –ø—Ä–æ–≥—Ä–µ—Å—Å", "reversed": "–ó–∞–¥–µ—Ä–∂–∫–∏, —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ—Å–ø–µ—à–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è"},
    {"id": 30, "name": "–î–µ–≤—è—Ç–∫–∞ –ñ–µ–∑–ª–æ–≤", "upright": "–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, –∑–∞—â–∏—Ç–∞, –ø–æ—Å–ª–µ–¥–Ω–µ–µ —É—Å–∏–ª–∏–µ, –±–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "reversed": "–û–±–æ—Ä–æ–Ω–∞, –ø–∞—Ä–∞–Ω–æ–π—è, –∏—Å—Ç–æ—â–µ–Ω–∏–µ"},
    {"id": 31, "name": "–î–µ—Å—è—Ç–∫–∞ –ñ–µ–∑–ª–æ–≤", "upright": "–ë—Ä–µ–º—è, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, —Ç—è–∂–µ–ª–∞—è —Ä–∞–±–æ—Ç–∞, –¥–∞–≤–ª–µ–Ω–∏–µ", "reversed": "–°–Ω—è—Ç–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏, –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ"},
    {"id": 32, "name": "–ü–∞–∂ –ñ–µ–∑–ª–æ–≤", "upright": "–≠–Ω—Ç—É–∑–∏–∞–∑–º, –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –Ω–æ–≤–æ—Å—Ç–∏, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ", "reversed": "–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –ø—Ä–æ–º–µ–¥–ª–µ–Ω–∏–µ, –ø–ª–æ—Ö–∏–µ –Ω–æ–≤–æ—Å—Ç–∏"},
    {"id": 33, "name": "–†—ã—Ü–∞—Ä—å –ñ–µ–∑–ª–æ–≤", "upright": "–î–µ–π—Å—Ç–≤–∏–µ, –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ, —ç–Ω–µ—Ä–≥–∏—è, –∏–º–ø—É–ª—å—Å–∏–≤–Ω–æ—Å—Ç—å", "reversed": "–ù–µ—Ç–µ—Ä–ø–µ–Ω–∏–µ, –±–µ–∑—Ä–∞—Å—Å—É–¥—Å—Ç–≤–æ, –∑–∞–¥–µ—Ä–∂–∫–∏"},
    {"id": 34, "name": "–ö–æ—Ä–æ–ª–µ–≤–∞ –ñ–µ–∑–ª–æ–≤", "upright": "–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, —Ö–∞—Ä–∏–∑–º–∞, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –æ–ø—Ç–∏–º–∏–∑–º", "reversed": "–†–µ–≤–Ω–æ—Å—Ç—å, –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å"},
    {"id": 35, "name": "–ö–æ—Ä–æ–ª—å –ñ–µ–∑–ª–æ–≤", "upright": "–õ–∏–¥–µ—Ä—Å—Ç–≤–æ, –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å—Ç–≤–æ, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, –≤–∏–¥–µ–Ω–∏–µ", "reversed": "–¢–∏—Ä–∞–Ω–∏—è, –¥–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –∏–º–ø—É–ª—å—Å–∏–≤–Ω–æ—Å—Ç—å"},
    
    # ========== –ö–£–ë–ö–ò (–ß–ê–®–ò) - 14 –∫–∞—Ä—Ç ==========
    {"id": 36, "name": "–¢—É–∑ –ö—É–±–∫–æ–≤", "upright": "–ù–æ–≤–∞—è –ª—é–±–æ–≤—å, —ç–º–æ—Ü–∏–∏, –∏–Ω—Ç—É–∏—Ü–∏—è, –¥—É—Ö–æ–≤–Ω–æ—Å—Ç—å", "reversed": "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–ø–∞–¥, –ø—É—Å—Ç–æ—Ç–∞, –ø–æ—Ç–µ—Ä—è —á—É–≤—Å—Ç–≤"},
    {"id": 37, "name": "–î–≤–æ–π–∫–∞ –ö—É–±–∫–æ–≤", "upright": "–°–æ—é–∑, –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ, –≥–∞—Ä–º–æ–Ω–∏—è, –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ", "reversed": "–†–∞–∑—Ä—ã–≤, –¥–∏—Å–±–∞–ª–∞–Ω—Å, –∫–æ–Ω—Ñ–ª–∏–∫—Ç"},
    {"id": 38, "name": "–¢—Ä–æ–π–∫–∞ –ö—É–±–∫–æ–≤", "upright": "–ü—Ä–∞–∑–¥–Ω–∏–∫, –¥—Ä—É–∂–±–∞, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ, —Å–æ–æ–±—â–µ—Å—Ç–≤–æ", "reversed": "–ß—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –≤–µ—Å–µ–ª—å–µ, –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ, –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã"},
    {"id": 39, "name": "–ß–µ—Ç–≤–µ—Ä–∫–∞ –ö—É–±–∫–æ–≤", "upright": "–ê–ø–∞—Ç–∏—è, —Å–æ–∑–µ—Ä—Ü–∞–Ω–∏–µ, –æ—Ç—Å—Ç—Ä–∞–Ω–µ–Ω–Ω–æ—Å—Ç—å, –Ω–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å", "reversed": "–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –ø—Ä–∏–Ω—è—Ç–∏–µ, –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å"},
    {"id": 40, "name": "–ü—è—Ç–µ—Ä–∫–∞ –ö—É–±–∫–æ–≤", "upright": "–ü–æ—Ç–µ—Ä—è, —Å–æ–∂–∞–ª–µ–Ω–∏–µ, —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ, –ø–µ—á–∞–ª—å", "reversed": "–ü—Ä–∏–Ω—è—Ç–∏–µ, –ø—Ä–æ—â–µ–Ω–∏–µ, –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥"},
    {"id": 41, "name": "–®–µ—Å—Ç–µ—Ä–∫–∞ –ö—É–±–∫–æ–≤", "upright": "–ù–æ—Å—Ç–∞–ª—å–≥–∏—è, –¥–µ—Ç—Å—Ç–≤–æ, –Ω–µ–≤–∏–Ω–Ω–æ—Å—Ç—å, —â–µ–¥—Ä–æ—Å—Ç—å", "reversed": "–ó–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ—à–ª–æ–º, –Ω–∞–∏–≤–Ω–æ—Å—Ç—å"},
    {"id": 42, "name": "–°–µ–º–µ—Ä–∫–∞ –ö—É–±–∫–æ–≤", "upright": "–í—ã–±–æ—Ä, –∏–ª–ª—é–∑–∏–∏, —Ñ–∞–Ω—Ç–∞–∑–∏–∏, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏", "reversed": "–†–µ—à–µ–Ω–∏–µ, —è—Å–Ω–æ—Å—Ç—å, —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥"},
    {"id": 43, "name": "–í–æ—Å—å–º–µ—Ä–∫–∞ –ö—É–±–∫–æ–≤", "upright": "–û—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–µ, –æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ, –ø–æ–∏—Å–∫ –≥–ª—É–±–∏–Ω—ã", "reversed": "–ò–∑–±–µ–≥–∞–Ω–∏–µ, —Å—Ç—Ä–∞—Ö —É—Ö–æ–¥–∞, –∑–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏–µ"},
    {"id": 44, "name": "–î–µ–≤—è—Ç–∫–∞ –ö—É–±–∫–æ–≤", "upright": "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏–µ, —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ, –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–π –∫–æ–º—Ñ–æ—Ä—Ç", "reversed": "–¢—â–µ—Å–ª–∞–≤–∏–µ, –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–º, –Ω–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å"},
    {"id": 45, "name": "–î–µ—Å—è—Ç–∫–∞ –ö—É–±–∫–æ–≤", "upright": "–°–µ–º–µ–π–Ω–æ–µ —Å—á–∞—Å—Ç—å–µ, –≥–∞—Ä–º–æ–Ω–∏—è, —Ä–∞–¥–æ—Å—Ç—å, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ", "reversed": "–°–µ–º–µ–π–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, –¥–∏—Å–≥–∞—Ä–º–æ–Ω–∏—è, —Ä–∞–∑–æ–±—â–µ–Ω–Ω–æ—Å—Ç—å"},
    {"id": 46, "name": "–ü–∞–∂ –ö—É–±–∫–æ–≤", "upright": "–¢–≤–æ—Ä—á–µ—Å–∫–∏–µ –Ω–æ–≤–æ—Å—Ç–∏, –∏–Ω—Ç—É–∏—Ü–∏—è, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "reversed": "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –Ω–µ–∑—Ä–µ–ª–æ—Å—Ç—å, —Å–ø–ª–µ—Ç–Ω–∏, —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ"},
    {"id": 47, "name": "–†—ã—Ü–∞—Ä—å –ö—É–±–∫–æ–≤", "upright": "–†–æ–º–∞–Ω—Ç–∏–∫–∞, –æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ, –∏–¥–µ–∞–ª–∏–∑–º, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è", "reversed": "–†–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ, –ø–µ—Å—Å–∏–º–∏–∑–º, –Ω–µ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è"},
    {"id": 48, "name": "–ö–æ—Ä–æ–ª–µ–≤–∞ –ö—É–±–∫–æ–≤", "upright": "–°–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ, –∑–∞–±–æ—Ç–∞, –∏–Ω—Ç—É–∏—Ü–∏—è, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∑—Ä–µ–ª–æ—Å—Ç—å", "reversed": "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –ø–æ–¥–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç—å"},
    {"id": 49, "name": "–ö–æ—Ä–æ–ª—å –ö—É–±–∫–æ–≤", "upright": "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å, –¥–∏–ø–ª–æ–º–∞—Ç–∏—è, —Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ", "reversed": "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –º–∞–Ω–∏–ø—É–ª—è—Ü–∏—è, –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ —á—É–≤—Å—Ç–≤"},
    
    # ========== –ú–ï–ß–ò - 14 –∫–∞—Ä—Ç ==========
    {"id": 50, "name": "–¢—É–∑ –ú–µ—á–µ–π", "upright": "–ü—Ä–æ—Ä—ã–≤, —è—Å–Ω–æ—Å—Ç—å, –æ—Å—Ç—Ä–æ–µ –º—ã—à–ª–µ–Ω–∏–µ, –∏—Å—Ç–∏–Ω–∞", "reversed": "–ü—É—Ç–∞–Ω–∏—Ü–∞, –∂–µ—Å—Ç–æ–∫–æ—Å—Ç—å, —Ö–∞–æ—Å"},
    {"id": 51, "name": "–î–≤–æ–π–∫–∞ –ú–µ—á–µ–π", "upright": "–¢—É–ø–∏–∫, —Ç—Ä—É–¥–Ω—ã–π –≤—ã–±–æ—Ä, —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ", "reversed": "–†–µ—à–µ–Ω–∏–µ, –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥, —Å–Ω—è—Ç–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫"},
    {"id": 52, "name": "–¢—Ä–æ–π–∫–∞ –ú–µ—á–µ–π", "upright": "–°–µ—Ä–¥–µ—á–Ω–∞—è –±–æ–ª—å, –ø–µ—á–∞–ª—å, –≥–æ—Ä–µ, –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ", "reversed": "–ò—Å—Ü–µ–ª–µ–Ω–∏–µ, –ø—Ä–æ—â–µ–Ω–∏–µ, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ"},
    {"id": 53, "name": "–ß–µ—Ç–≤–µ—Ä–∫–∞ –ú–µ—á–µ–π", "upright": "–û—Ç–¥—ã—Ö, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, —Å–æ–∑–µ—Ä—Ü–∞–Ω–∏–µ, –º–µ–¥–∏—Ç–∞—Ü–∏—è", "reversed": "–ë–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ, –∑–∞—Å—Ç–æ–π, –ø–µ—Ä–µ—É—Ç–æ–º–ª–µ–Ω–∏–µ"},
    {"id": 54, "name": "–ü—è—Ç–µ—Ä–∫–∞ –ú–µ—á–µ–π", "upright": "–ö–æ–Ω—Ñ–ª–∏–∫—Ç, —É–Ω–∏–∂–µ–Ω–∏–µ, –ø–æ—Ä–∞–∂–µ–Ω–∏–µ, —ç–≥–æ–∏–∑–º", "reversed": "–ü—Ä–∏–º–∏—Ä–µ–Ω–∏–µ, –ø—Ä–æ—â–µ–Ω–∏–µ, –¥–≤–∏–∂–µ–Ω–∏–µ –¥–∞–ª—å—à–µ"},
    {"id": 55, "name": "–®–µ—Å—Ç–µ—Ä–∫–∞ –ú–µ—á–µ–π", "upright": "–ü–µ—Ä–µ—Ö–æ–¥, –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥, –æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ, –∏—Å—Ü–µ–ª–µ–Ω–∏–µ", "reversed": "–ó–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏–µ, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –±–∞–≥–∞–∂, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–≤–∏–≥–∞—Ç—å—Å—è"},
    {"id": 56, "name": "–°–µ–º–µ—Ä–∫–∞ –ú–µ—á–µ–π", "upright": "–•–∏—Ç—Ä–æ—Å—Ç—å, —Å—Ç—Ä–∞—Ç–µ–≥–∏—è, –∏–∑–±–µ–≥–∞–Ω–∏–µ, —Å–µ–∫—Ä–µ—Ç—ã", "reversed": "–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ, —á–µ—Å—Ç–Ω–æ—Å—Ç—å, –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ"},
    {"id": 57, "name": "–í–æ—Å—å–º–µ—Ä–∫–∞ –ú–µ—á–µ–π", "upright": "–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, —á—É–≤—Å—Ç–≤–æ –ª–æ–≤—É—à–∫–∏, —Å–∞–º–æ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ", "reversed": "–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ, –Ω–æ–≤—ã–µ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã, —Å–≤–æ–±–æ–¥–∞"},
    {"id": 58, "name": "–î–µ–≤—è—Ç–∫–∞ –ú–µ—á–µ–π", "upright": "–¢—Ä–µ–≤–æ–≥–∞, —Å—Ç—Ä–∞—Ö–∏, –∫–æ—à–º–∞—Ä—ã, —á—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã", "reversed": "–ù–∞–¥–µ–∂–¥–∞, –∏—Å—Ü–µ–ª–µ–Ω–∏–µ, –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ö–æ–≤"},
    {"id": 59, "name": "–î–µ—Å—è—Ç–∫–∞ –ú–µ—á–µ–π", "upright": "–ö–æ–Ω–µ—Ü, –ø–æ—Ä–∞–∂–µ–Ω–∏–µ, –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ, –ø–æ—Ç–µ—Ä—è", "reversed": "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, –≤–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ, –Ω–æ–≤–∞—è –Ω–∞–¥–µ–∂–¥–∞"},
    {"id": 60, "name": "–ü–∞–∂ –ú–µ—á–µ–π", "upright": "–õ—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ, –Ω–æ–≤—ã–µ –∏–¥–µ–∏, –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è, –±–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "reversed": "–°–ø–ª–µ—Ç–Ω–∏, –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏, –Ω–µ—á–µ—Å—Ç–Ω–æ—Å—Ç—å"},
    {"id": 61, "name": "–†—ã—Ü–∞—Ä—å –ú–µ—á–µ–π", "upright": "–ê–º–±–∏—Ü–∏–∏, —Å–∫–æ—Ä–æ—Å—Ç—å, –∞–≥—Ä–µ—Å—Å–∏—è, –Ω–µ—Ç–µ—Ä–ø–µ–Ω–∏–µ", "reversed": "–ò–º–ø—É–ª—å—Å–∏–≤–Ω–æ—Å—Ç—å, –±–µ–∑—Ä–∞—Å—Å—É–¥—Å—Ç–≤–æ, –∑–∞–¥–µ—Ä–∂–∫–∏"},
    {"id": 62, "name": "–ö–æ—Ä–æ–ª–µ–≤–∞ –ú–µ—á–µ–π", "upright": "–Ø—Å–Ω–æ—Å—Ç—å —É–º–∞, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ—Å—Ç—å", "reversed": "–•–æ–ª–æ–¥–Ω–æ—Å—Ç—å, –∂–µ—Å—Ç–æ–∫–æ—Å—Ç—å, –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏"},
    {"id": 63, "name": "–ö–æ—Ä–æ–ª—å –ú–µ—á–µ–π", "upright": "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç, –ø—Ä–∞–≤–¥–∞, –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç, —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å", "reversed": "–ú–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏, –∂–µ—Å—Ç–æ–∫–æ—Å—Ç—å, —Ç–∏—Ä–∞–Ω–∏—è"},
    
    # ========== –ü–ï–ù–¢–ê–ö–õ–ò (–î–ï–ù–¨–ì–ò) - 14 –∫–∞—Ä—Ç ==========
    {"id": 64, "name": "–¢—É–∑ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "upright": "–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –±–æ–≥–∞—Ç—Å—Ç–≤–æ, –ø—Ä–æ—Ü–≤–µ—Ç–∞–Ω–∏–µ, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å", "reversed": "–ü–æ—Ç–µ—Ä—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π, –∂–∞–¥–Ω–æ—Å—Ç—å, –ø–ª–æ—Ö–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏"},
    {"id": 65, "name": "–î–≤–æ–π–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "upright": "–ë–∞–ª–∞–Ω—Å, –∞–¥–∞–ø—Ç–∞—Ü–∏—è, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã, –≥–∏–±–∫–æ—Å—Ç—å", "reversed": "–î–∏—Å–±–∞–ª–∞–Ω—Å, –Ω–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω–æ—Å—Ç—å, –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞"},
    {"id": 66, "name": "–¢—Ä–æ–π–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "upright": "–°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ, –æ–±—É—á–µ–Ω–∏–µ, —Ä–æ—Å—Ç, –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ", "reversed": "–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞, –Ω–µ–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å"},
    {"id": 67, "name": "–ß–µ—Ç–≤–µ—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "upright": "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –∫–æ–Ω—Ç—Ä–æ–ª—å, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å", "reversed": "–ñ–∞–¥–Ω–æ—Å—Ç—å, —Ä–∞—Å—Ç–æ—á–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ü–µ–ø–ª—è–Ω–∏–µ"},
    {"id": 68, "name": "–ü—è—Ç–µ—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "upright": "–ù—É–∂–¥–∞, –±–µ–¥–Ω–æ—Å—Ç—å, –∏–∑–æ–ª—è—Ü–∏—è, —Ç—Ä–µ–≤–æ–≥–∞", "reversed": "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, —â–µ–¥—Ä–æ—Å—Ç—å, –¥—É—Ö–æ–≤–Ω–æ–µ –±–æ–≥–∞—Ç—Å—Ç–≤–æ"},
    {"id": 69, "name": "–®–µ—Å—Ç–µ—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "upright": "–©–µ–¥—Ä–æ—Å—Ç—å, –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –ø–æ–º–æ—â—å, –æ–±–º–µ–Ω", "reversed": "–î–æ–ª–≥–∏, —ç–≥–æ–∏–∑–º, –Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤–æ"},
    {"id": 70, "name": "–°–µ–º–µ—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "upright": "–¢–µ—Ä–ø–µ–Ω–∏–µ, –Ω–∞–≥—Ä–∞–¥–∞, –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏, —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è", "reversed": "–ù–µ—Ç–µ—Ä–ø–µ–Ω–∏–µ, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–∞–≥—Ä–∞–¥, –Ω–µ—É–¥–∞—á–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏"},
    {"id": 71, "name": "–í–æ—Å—å–º–µ—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "upright": "–ú–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ, –∫–∞—á–µ—Å—Ç–≤–æ, —Ä–µ–º–µ—Å–ª–æ, –ø—Ä–µ–¥–∞–Ω–Ω–æ—Å—Ç—å –¥–µ–ª—É", "reversed": "–ù–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –ª–µ–Ω—å, –ø–µ—Ä—Ñ–µ–∫—Ü–∏–æ–Ω–∏–∑–º"},
    {"id": 72, "name": "–î–µ–≤—è—Ç–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "upright": "–ò–∑–æ–±–∏–ª–∏–µ, —Ä–æ—Å–∫–æ—à—å, —Å–∞–º–æ–æ–±–µ—Å–ø–µ—á–µ–Ω–Ω–æ—Å—Ç—å, –Ω–∞–≥—Ä–∞–¥–∞", "reversed": "–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ—Å—Ç—å, –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–º"},
    {"id": 73, "name": "–î–µ—Å—è—Ç–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "upright": "–ë–æ–≥–∞—Ç—Å—Ç–≤–æ, –Ω–∞—Å–ª–µ–¥–∏–µ, —Å–µ–º—å—è, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å", "reversed": "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ—Ç–µ—Ä–∏, —Å–µ–º–µ–π–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å"},
    {"id": 74, "name": "–ü–∞–∂ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "upright": "–û–±—É—á–µ–Ω–∏–µ, –∏–∑—É—á–µ–Ω–∏–µ, –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –∞–º–±–∏—Ü–∏–∏", "reversed": "–õ–µ–Ω—å, —Ä–∞—Å—Ç–æ—á–∏—Ç–µ–ª—å—Å—Ç–≤–æ, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–º–±–∏—Ü–∏–π"},
    {"id": 75, "name": "–†—ã—Ü–∞—Ä—å –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "upright": "–¢—Ä—É–¥–æ–ª—é–±–∏–µ, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å, –ø—Ä–æ–≥—Ä–µ—Å—Å", "reversed": "–õ–µ–Ω—å, –±–µ–∑–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –∑–∞—Å—Ç–æ–π"},
    {"id": 76, "name": "–ö–æ—Ä–æ–ª–µ–≤–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "upright": "–ò–∑–æ–±–∏–ª–∏–µ, –∑–∞–±–æ—Ç–∞, –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å, –∫–æ–º—Ñ–æ—Ä—Ç", "reversed": "–ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–º, —Ä–µ–≤–Ω–æ—Å—Ç—å, –Ω–µ–Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å"},
    {"id": 77, "name": "–ö–æ—Ä–æ–ª—å –ü–µ–Ω—Ç–∞–∫–ª–µ–π", "upright": "–ë–æ–≥–∞—Ç—Å—Ç–≤–æ, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ª–∏–¥–µ—Ä—Å—Ç–≤–æ, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å", "reversed": "–ñ–∞–¥–Ω–æ—Å—Ç—å, –∂–µ—Å—Ç–∫–æ—Å—Ç—å, –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–º"},
]

def draw_cards(count: int = 1) -> list:
    """–í—ã—Ç—è–Ω—É—Ç—å —Å–ª—É—á–∞–π–Ω—ã–µ –∫–∞—Ä—Ç—ã"""
    if count > len(TAROT_CARDS):
        count = len(TAROT_CARDS)
    
    cards = random.sample(TAROT_CARDS, count)
    
    # –î–æ–±–∞–≤–ª—è–µ–º –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–µ
    for card in cards:
        orientation = random.choice(["upright", "reversed"])
        card["orientation"] = orientation
        card["meaning"] = card[orientation]  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä—è–º–æ–µ –∏–ª–∏ –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    
    return cards

def interpret_cards(cards: list, reading_type: str) -> str:
    """–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –∫–∞—Ä—Ç"""
    interpretation = f"üìú *{get_reading_title(reading_type)}*\n\n"
    
    for i, card in enumerate(cards, 1):
        orientation_icon = "‚¨ÜÔ∏è" if card["orientation"] == "upright" else "‚¨áÔ∏è"
        meaning_type = "–ü—Ä—è–º–æ–µ" if card["orientation"] == "upright" else "–ü–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–æ–µ"
        
        interpretation += f"{i}. *{card['name']}* {orientation_icon}\n"
        interpretation += f"   ({meaning_type}): {card['meaning']}\n\n"
    
    interpretation += "\n‚ú® *–û–±—â–∏–π —Å–æ–≤–µ—Ç:* "
    
    upright_count = sum(1 for card in cards if card["orientation"] == "upright")
    total_cards = len(cards)
    
    if reading_type == "daily":
        if upright_count == total_cards:
            interpretation += "–ò–¥–µ–∞–ª—å–Ω—ã–π –¥–µ–Ω—å –¥–ª—è –Ω–∞—á–∏–Ω–∞–Ω–∏–π! –í—Å—ë –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å—Å—è."
        elif upright_count >= total_cards / 2:
            interpretation += "–î–µ–Ω—å –±—É–¥–µ—Ç —É–¥–∞—á–Ω—ã–º, –Ω–æ –±—É–¥—å—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã –≤ –º–µ–ª–æ—á–∞—Ö."
        else:
            interpretation += "–ü—Ä–æ—è–≤–∏—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å. –ù–µ –ø—Ä–∏–Ω–∏–º–∞–π—Ç–µ –ø–æ—Å–ø–µ—à–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π."
    elif reading_type == "love":
        interpretation += "–ü—Ä–∏—Å–ª—É—à–∞–π—Ç–µ—Å—å –∫ —Å–µ—Ä–¥—Ü—É, –Ω–æ –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –æ —Ä–∞–∑—É–º–µ."
    elif reading_type == "career":
        interpretation += "–°–º–µ–ª–æ—Å—Ç—å –∏ —É–ø–æ—Ä—Å—Ç–≤–æ –ø—Ä–∏–≤–µ–¥—É—Ç –∫ —É—Å–ø–µ—Ö—É."
    elif reading_type == "fate":
        interpretation += "–í–∞—à–∞ —Å—É–¥—å–±–∞ –≤ –≤–∞—à–∏—Ö —Ä—É–∫–∞—Ö. –î–µ–ª–∞–π—Ç–µ –≤—ã–±–æ—Ä –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ."
    else:
        interpretation += "–ö–∞—Ä—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –≤—ã–±–æ—Ä –∑–∞ –≤–∞–º–∏."
    
    return interpretation

def interpret_single_card(card: dict, question: str) -> str:
    """–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –æ–¥–Ω–æ–π –∫–∞—Ä—Ç—ã —Å –≤–æ–ø—Ä–æ—Å–æ–º"""
    # –ü–†–û–°–¢–û –í–´–ó–´–í–ê–ô–¢–ï yandex_gpt –Ω–∞–ø—Ä—è–º—É—é, –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ "AI-–∞–Ω–∞–ª–∏–∑"
    ai_result = yandex_gpt.get_hybrid_interpretation([card], question, 1)
    
    # –ï–°–õ–ò AI –æ—Ç–≤–µ—Ç–∏–ª - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–≥–æ
    if ai_result:
        return ai_result
    
    # Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É –µ—Å–ª–∏ AI –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª
    orientation_icon = "üîº" if card["orientation"] == "upright" else "üîΩ"
    
    text = f"üé¥ *–û–¥–Ω–∞ –∫–∞—Ä—Ç–∞ - –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å*\n\n"
    text += f"üìù *–í–∞—à –≤–æ–ø—Ä–æ—Å:* {question}\n\n"
    
    text += f"*–í—ã–ø–∞–ª–∞ –∫–∞—Ä—Ç–∞:* **{card['name']}** {orientation_icon}\n"
    text += f"*–ó–Ω–∞—á–µ–Ω–∏–µ:* {card['meaning']}\n\n"
    
    # –ê–Ω–∞–ª–∏–∑ —Å —É—á–µ—Ç–æ–º –≤–æ–ø—Ä–æ—Å–∞
    if "–ª—é–±–æ–≤" in question.lower() or "–≤–ª—é–±–ª" in question.lower() or "–ª—é–±–≤" in question.lower():
        text += "üíñ *–í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π:* "
        if card["orientation"] == "upright":
            text += f"{card['name']} —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≥–∞—Ä–º–æ–Ω–∏—é –∏ –≤–∑–∞–∏–º–æ–ø–æ–Ω–∏–º–∞–Ω–∏–µ.\n"
        else:
            text += f"–ü–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–∞—è {card['name']} —Å–æ–≤–µ—Ç—É–µ—Ç –ø—Ä–æ—è–≤–∏—Ç—å —Ç–µ—Ä–ø–µ–Ω–∏–µ –≤ —á—É–≤—Å—Ç–≤–∞—Ö.\n"
    
    elif "–∫–∞—Ä—å–µ—Ä" in question.lower() or "—Ä–∞–±–æ" in question.lower():
        text += "üíº *–í –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Å—Ñ–µ—Ä–µ:* "
        if card["orientation"] == "upright":
            text += f"{card['name']} –ø—Ä–µ–¥–≤–µ—â–∞–µ—Ç —É—Å–ø–µ—Ö –∏ –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ.\n"
        else:
            text += f"{card['name']} —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é.\n"
    
    else:
        text += "‚ú® *–ê–Ω–∞–ª–∏–∑:* "
        if card["orientation"] == "upright":
            text += "–ö–∞—Ä—Ç–∞ –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç—Å—Ç–≤—É–µ—Ç –≤–∞—à–∏–º –Ω–∞–º–µ—Ä–µ–Ω–∏—è–º.\n"
        else:
            text += "–°–∏—Ç—É–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –æ—Å–º—ã—Å–ª–µ–Ω–∏—è –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏.\n"
    
    return text

def interpret_three_cards(cards: list, question: str) -> str:
    """–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ç—Ä—ë—Ö –∫–∞—Ä—Ç —Å –≤–æ–ø—Ä–æ—Å–æ–º"""
    # –ü–†–û–°–¢–û –í–´–ó–´–í–ê–ô–¢–ï yandex_gpt
    ai_result = yandex_gpt.get_hybrid_interpretation(cards, question, 3)
    
    # –ï–°–õ–ò AI –æ—Ç–≤–µ—Ç–∏–ª - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–≥–æ
    if ai_result:
        return ai_result
    
    # Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É
    positions = ["–ü—Ä–æ—à–ª–æ–µ", "–ù–∞—Å—Ç–æ—è—â–µ–µ", "–ë—É–¥—É—â–µ–µ"]
    
    text = "üîÆ *–¢—Ä–∏ –∫–∞—Ä—Ç—ã: –ü—Ä–æ—à–ª–æ–µ - –ù–∞—Å—Ç–æ—è—â–µ–µ - –ë—É–¥—É—â–µ–µ*\n\n"
    text += f"üìù *–í–∞—à –≤–æ–ø—Ä–æ—Å:* {question}\n\n"
    
    for i, card in enumerate(cards):
        orientation_icon = "üîº" if card["orientation"] == "upright" else "üîΩ"
        text += f"*{positions[i]}:* **{card['name']}** {orientation_icon}\n"
        text += f"*–ó–Ω–∞—á–µ–Ω–∏–µ:* {card['meaning']}\n\n"
    
    # –ê–Ω–∞–ª–∏–∑ —Å —É—á–µ—Ç–æ–º —Ç–µ–º—ã –≤–æ–ø—Ä–æ—Å–∞
    if "–ª—é–±–æ–≤" in question.lower():
        text += "üíñ *–ê–Ω–∞–ª–∏–∑ –æ—Ç–Ω–æ—à–µ–Ω–∏–π:*\n"
        # –î–æ–±–∞–≤—å –∞–Ω–∞–ª–∏–∑ –¥–ª—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π –∏–ª–∏ –æ—Å—Ç–∞–≤—å –ø—Ä–æ—Å—Ç–æ–π
        upright_count = sum(1 for card in cards if card["orientation"] == "upright")
        if upright_count >= 2:
            text += "‚Ä¢ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –ø—Ä–µ–æ–±–ª–∞–¥–∞–µ—Ç –≥–∞—Ä–º–æ–Ω–∏—è.\n"
        else:
            text += "‚Ä¢ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –º–æ–≥—É—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏.\n"
    
    elif "–∫–∞—Ä—å–µ—Ä" in question.lower():
        text += "üíº *–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑:*\n"
        upright_count = sum(1 for card in cards if card["orientation"] == "upright")
        if upright_count >= 2:
            text += "‚Ä¢ –ö–∞—Ä—å–µ—Ä–Ω—ã–µ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã.\n"
        else:
            text += "‚Ä¢ –í —Ä–∞–±–æ—Ç–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è.\n"
    
    else:
        text += "‚ú® *–û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ —Ä–∞—Å–∫–ª–∞–¥–∞:*\n"
        # –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –≤–º–µ—Å—Ç–æ analyze_general_reading
        upright_count = sum(1 for card in cards if card["orientation"] == "upright")
        total = len(cards)
        
        if upright_count == total:
            text += "‚Ä¢ –í—Å–µ –∫–∞—Ä—Ç—ã –ø—Ä—è–º—ã–µ - –≥–∞—Ä–º–æ–Ω–∏—á–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏.\n"
        elif upright_count >= total / 2:
            text += "‚Ä¢ –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫–∞—Ä—Ç –ø—Ä—è–º—ã–µ - –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑.\n"
        else:
            text += "‚Ä¢ –ü—Ä–µ–æ–±–ª–∞–¥–∞—é—Ç –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—ã–µ –∫–∞—Ä—Ç—ã - –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è —É—Å–∏–ª–∏—è.\n"
    
    return text

def interpret_five_cards(cards: list, question: str) -> str:
    """–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –ø—è—Ç–∏ –∫–∞—Ä—Ç —Å –≤–æ–ø—Ä–æ—Å–æ–º"""
    # –ü–†–û–°–¢–û –í–´–ó–´–í–ê–ô–¢–ï yandex_gpt
    ai_result = yandex_gpt.get_hybrid_interpretation(cards, question, 5)
    
    # –ï–°–õ–ò AI –æ—Ç–≤–µ—Ç–∏–ª - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–≥–æ
    if ai_result:
        return ai_result
    
    # Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É
    positions = [
        "–°–æ–±—ã—Ç–∏—è –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–∏–∑–æ–π–¥—É—Ç",
        "–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–µ–≥—Ä–∞–¥—ã", 
        "–ò—Å—Ç–æ—á–Ω–∏–∫ –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ—Å—Ç–µ–π",
        "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∫ –¥–µ–π—Å—Ç–≤–∏—é",
        "–ö–∞–∫ –±—É–¥—É—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è —Å–æ–±—ã—Ç–∏—è"
    ]
    
    text = "‚ú® *–ü—è—Ç—å –∫–∞—Ä—Ç: –ü–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥*\n\n"
    text += f"üìù *–í–∞—à –≤–æ–ø—Ä–æ—Å:* {question}\n\n"
    
    for i, card in enumerate(cards):
        orientation_icon = "üîº" if card["orientation"] == "upright" else "üîΩ"
        text += f"{i+1}. **{positions[i]}**\n"
        text += f"   –ö–∞—Ä—Ç–∞: **{card['name']}** {orientation_icon}\n"
        text += f"   *–ó–Ω–∞—á–µ–Ω–∏–µ:* {card['meaning']}\n\n"
    
    # –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å —É—á–µ—Ç–æ–º –≤–æ–ø—Ä–æ—Å–∞
    text += "üìä *–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑:*\n"
    text += generate_detailed_analysis(cards, question)
    
    return text


def analyze_relationship_reading(cards):
    """–ê–Ω–∞–ª–∏–∑ —Ä–∞—Å–∫–ª–∞–¥–∞ –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –æ –ª—é–±–≤–∏"""
    past, present, future = cards
    
    analysis = ""
    
    # –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö
    if past["orientation"] == "upright":
        analysis += "‚Ä¢ –ü—Ä–æ—à–ª—ã–π –æ–ø—ã—Ç –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –±—ã–ª –≤ —Ü–µ–ª–æ–º –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º\n"
    else:
        analysis += "‚Ä¢ –í –ø—Ä–æ—à–ª–æ–º –±—ã–ª–∏ —É—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —É—á–µ—Å—Ç—å\n"
    
    # –ê–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ
    if present["name"] in ["–í–ª—é–±–ª–µ–Ω–Ω—ã–µ", "–î–≤–æ–π–∫–∞ –ö—É–±–∫–æ–≤", "–î–µ—Å—è—Ç–∫–∞ –ö—É–±–∫–æ–≤"]:
        analysis += "‚Ä¢ –°–µ–π—á–∞—Å –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –≥–∞—Ä–º–æ–Ω–∏–∏\n"
    
    # –ê–Ω–∞–ª–∏–∑ –±—É–¥—É—â–µ–≥–æ
    if future["orientation"] == "upright":
        analysis += "‚Ä¢ –ë—É–¥—É—â–µ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π –≤—ã–≥–ª—è–¥–∏—Ç –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω–æ\n"
    else:
        analysis += "‚Ä¢ –í –±—É–¥—É—â–µ–º –≤–æ–∑–º–æ–∂–Ω—ã –∏—Å–ø—ã—Ç–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —É–∫—Ä–µ–ø—è—Ç —Å–≤—è–∑—å\n"
    
    return analysis

def analyze_career_reading(cards):
    """–ê–Ω–∞–ª–∏–∑ —Ä–∞—Å–∫–ª–∞–¥–∞ –¥–ª—è –∫–∞—Ä—å–µ—Ä–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤"""
    analysis = ""
    
    # –ü–æ–¥—Å—á–µ—Ç –∫–∞—Ä—Ç –∂–µ–∑–ª–æ–≤ –∏ –ø–µ–Ω—Ç–∞–∫–ª–µ–π (–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–∞—Å—Ç–∏)
    career_cards = sum(1 for card in cards if "–ñ–µ–∑–ª" in card["name"] or "–ü–µ–Ω—Ç–∞–∫–ª" in card["name"])
    
    if career_cards >= 2:
        analysis += "‚Ä¢ –ö–∞—Ä—Ç—ã —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ —Å–∏–ª—å–Ω—É—é –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é —Ç–µ–º—É\n"
    
    # –ê–Ω–∞–ª–∏–∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (3-—è –∫–∞—Ä—Ç–∞ –≤ —Ç—Ä–µ—Ö–∫–∞—Ä—Ç–æ—á–Ω–æ–º)
    if len(cards) >= 3:
        advice_card = cards[2]
        if advice_card["orientation"] == "upright":
            analysis += f"‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: {advice_card['meaning'].lower()}\n"
    
    return analysis

def generate_detailed_analysis(cards, question):
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π"""
    analysis = ""
    
    # –ê–Ω–∞–ª–∏–∑ –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º
    upright_count = sum(1 for card in cards if card["orientation"] == "upright")
    
    if upright_count == len(cards):
        analysis += "‚Ä¢ –í—Å–µ –∫–∞—Ä—Ç—ã –ø—Ä—è–º—ã–µ - —Å–∏–ª—å–Ω–∞—è –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–Ω–∞–º–∏–∫–∞\n"
    elif upright_count >= len(cards) / 2:
        analysis += "‚Ä¢ –ü—Ä–µ–æ–±–ª–∞–¥–∞—é—Ç –ø—Ä—è–º—ã–µ –∫–∞—Ä—Ç—ã - –æ–±—â–∏–π —Ñ–æ–Ω –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã–π\n"
    else:
        analysis += "‚Ä¢ –ú–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—ã—Ö –∫–∞—Ä—Ç - –≤—Ä–µ–º—è –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–∞–±–æ—Ç—ã\n"
    
    # –ê–Ω–∞–ª–∏–∑ –∫–ª—é—á–µ–≤—ã—Ö –∫–∞—Ä—Ç
    major_arcana = [card for card in cards if card["name"] in MAJOR_ARCANA_NAMES]
    if major_arcana:
        analysis += f"‚Ä¢ –í —Ä–∞—Å–∫–ª–∞–¥–µ {len(major_arcana)} —Å—Ç–∞—Ä—à–∏—Ö –∞—Ä–∫–∞–Ω–æ–≤ - —Å–∏–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ —Å—É–¥—å–±—ã\n"
    
    # –ö–æ–Ω—Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
    if "–¥–µ–Ω—å–≥" in question.lower() or "—Ñ–∏–Ω–∞–Ω—Å" in question.lower():
        analysis += "‚Ä¢ –í —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö –±—É–¥—å—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã –∫ –¥–µ—Ç–∞–ª—è–º\n"
    elif "–∑–¥–æ—Ä–æ–≤" in question.lower():
        analysis += "‚Ä¢ –ó–∞–±–æ—Ç–∞ –æ –∑–¥–æ—Ä–æ–≤—å–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–µ\n"
    
    return analysis
def get_reading_title(reading_type: str) -> str:
    titles = {
        "daily": "–ì–∞–¥–∞–Ω–∏–µ –Ω–∞ –¥–µ–Ω—å",
        "love": "–ì–∞–¥–∞–Ω–∏–µ –Ω–∞ –ª—é–±–æ–≤—å",
        "career": "–ì–∞–¥–∞–Ω–∏–µ –Ω–∞ –∫–∞—Ä—å–µ—Ä—É",
        "fate": "–ì–∞–¥–∞–Ω–∏–µ –Ω–∞ —Å—É–¥—å–±—É"
    }
    return titles.get(reading_type, "–ì–∞–¥–∞–Ω–∏–µ")

def check_daily_limit(user_id: int, session) -> tuple:
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –≥–∞–¥–∞–Ω–∏–π"""
    user = session.query(User).filter_by(user_id=user_id).first()
    today = date.today()
    
    if not user:
        return True, 0  # –õ–∏–º–∏—Ç –Ω–µ –∏—Å—á–µ—Ä–ø–∞–Ω, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ 0
    
    if user.last_daily_date and user.last_daily_date.date() == today:
        if user.daily_readings >= 3:
            return False, user.daily_readings  # –õ–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω
        return True, user.daily_readings  # –ï—â—ë –º–æ–∂–Ω–æ
    
    return True, 0  # –ù–æ–≤—ã–π –¥–µ–Ω—å, –ª–∏–º–∏—Ç —Å–±—Ä–æ—à–µ–Ω

def get_card_image_path(card_name: str) -> str:
    """–ü–æ–ª—É—á–∏—Ç—å –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é –∫–∞—Ä—Ç—ã"""
    # –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∏–º—è –∫–∞—Ä—Ç—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ñ–∞–π–ª–∞
    normalized_name = card_name.lower().replace(' ', '_').replace(',', '').replace('-', '_')
    
    # –ü–æ–ø—Ä–æ–±—É–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤
    possible_filenames = [
        f"{normalized_name}.jpg",
        f"{normalized_name}.jpeg",
        f"{normalized_name}.png",
        f"{card_name.lower().replace(' ', '')}.jpg",
        f"{card_name.lower().replace(' ', '_')}.jpg",
        # –î–ª—è —Ä—É—Å—Å–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π
        f"{card_name.lower()}.jpg",
        f"{card_name}.jpg",
    ]
    
    images_dir = "images"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
    for filename in possible_filenames:
        image_path = os.path.join(images_dir, filename)
        if os.path.exists(image_path):
            return image_path
    
    # –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏, –ø–æ–ø—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ –ø–æ —á–∞—Å—Ç–∏ –∏–º–µ–Ω–∏
    for file in os.listdir(images_dir):
        if card_name.lower().replace(' ', '') in file.lower().replace(' ', ''):
            return os.path.join(images_dir, file)
    
    # –ó–∞–≥–ª—É—à–∫–∞ –µ—Å–ª–∏ –Ω–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    return os.path.join(images_dir, "default.jpg")

def get_reading_type_image(reading_type: str) -> str:
    """–ü–æ–ª—É—á–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è —Ç–∏–ø–∞ –≥–∞–¥–∞–Ω–∏—è"""
    images_dir = "images"
    reading_images = {
        "daily": "daily.jpg",
        "love": "love.jpg",
        "career": "career.jpg",
        "fate": "fate.jpg"
    }
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
    possible_names = [
        reading_images.get(reading_type),
        f"{reading_type}_reading.jpg",
        f"{reading_type}.jpg",
        "tarot_background.jpg",
        "default.jpg"
    ]
    
    for filename in possible_names:
        if filename:
            image_path = os.path.join(images_dir, filename)
            if os.path.exists(image_path):
                return image_path
    
    return os.path.join(images_dir, "default.jpg")

# ========== –£–õ–£–ß–®–ï–ù–ù–´–ï –ü–†–ï–î–°–ö–ê–ó–ê–ù–ò–Ø ==========

class EnhancedTarotReader:
    """–ö–ª–∞—Å—Å –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π —Å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–µ–π"""
    
    def __init__(self):
        self.zodiac_insights = {
            "‚ôà –û–≤–µ–Ω": {
                "strengths": ["—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "—Å–º–µ–ª–æ—Å—Ç—å", "—ç–Ω—Ç—É–∑–∏–∞–∑–º"],
                "advice": "–î–µ–π—Å—Ç–≤—É–π—Ç–µ —Å–º–µ–ª–æ, –Ω–æ –æ–±–¥—É–º—ã–≤–∞–π—Ç–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è."
            },
            "‚ôâ –¢–µ–ª–µ—Ü": {
                "strengths": ["—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å", "–ø—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å", "–Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å"],
                "advice": "–ë—É–¥—å—Ç–µ —Ç–µ—Ä–ø–µ–ª–∏–≤—ã, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–∏–¥—É—Ç –≤–æ–≤—Ä–µ–º—è."
            },
            "‚ôä –ë–ª–∏–∑–Ω–µ—Ü—ã": {
                "strengths": ["–æ–±—â–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å", "–ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å"],
                "advice": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞—Ä –æ–±—â–µ–Ω–∏—è –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á."
            },
            "‚ôã –†–∞–∫": {
                "strengths": ["–∏–Ω—Ç—É–∏—Ü–∏—è", "–∑–∞–±–æ—Ç–∞", "—ç–º–ø–∞—Ç–∏—è"],
                "advice": "–î–æ–≤–µ—Ä—è–π—Ç–µ –∏–Ω—Ç—É–∏—Ü–∏–∏ –≤ –ø—Ä–∏–Ω—è—Ç–∏–∏ —Ä–µ—à–µ–Ω–∏–π."
            },
            "‚ôå –õ–µ–≤": {
                "strengths": ["—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å", "—Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ", "—â–µ–¥—Ä–æ—Å—Ç—å"],
                "advice": "–í–∞—à–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç —É–¥–∞—á—É."
            },
            "‚ôç –î–µ–≤–∞": {
                "strengths": ["–≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–∞–Ω–∞–ª–∏—Ç–∏—á–Ω–æ—Å—Ç—å", "–ø—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å"],
                "advice": "–î–µ—Ç–∞–ª–∏ –≤–∞–∂–Ω—ã, –Ω–æ –Ω–µ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–π—Ç–µ—Å—å –Ω–∞ –º–µ–ª–æ—á–∞—Ö."
            },
            "‚ôé –í–µ—Å—ã": {
                "strengths": ["–¥–∏–ø–ª–æ–º–∞—Ç–∏—è", "–≥–∞—Ä–º–æ–Ω–∏—è", "—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å"],
                "advice": "–°—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∫ –±–∞–ª–∞–Ω—Å—É –≤–æ –≤—Å–µ—Ö —Å—Ñ–µ—Ä–∞—Ö."
            },
            "‚ôè –°–∫–æ—Ä–ø–∏–æ–Ω": {
                "strengths": ["—Å—Ç—Ä–∞—Å—Ç—å", "–ø—Ä–æ–Ω–∏—Ü–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"],
                "advice": "–ì–ª—É–±–æ–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–µ–¥—É—Ç –∫ —Ä–æ—Å—Ç—É."
            },
            "‚ôê –°—Ç—Ä–µ–ª–µ—Ü": {
                "strengths": ["–æ–ø—Ç–∏–º–∏–∑–º", "—Å–≤–æ–±–æ–¥–æ–ª—é–±–∏–µ", "—Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–π —Å–∫–ª–∞–¥"],
                "advice": "–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∂–¥—É—Ç –≤–∞—Å –Ω–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–µ."
            },
            "‚ôë –ö–æ–∑–µ—Ä–æ–≥": {
                "strengths": ["–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞", "–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å", "–∞–º–±–∏—Ü–∏–æ–∑–Ω–æ—Å—Ç—å"],
                "advice": "–¢—Ä—É–¥–æ–ª—é–±–∏–µ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –∑–∞—Å–ª—É–∂–µ–Ω–Ω–æ–º—É —É—Å–ø–µ—Ö—É."
            },
            "‚ôí –í–æ–¥–æ–ª–µ–π": {
                "strengths": ["–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å", "–≥—É–º–∞–Ω–Ω–æ—Å—Ç—å", "–∏–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å"],
                "advice": "–ò–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ –∏–¥–µ–∏ –∂–¥—É—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏."
            },
            "‚ôì –†—ã–±—ã": {
                "strengths": ["–∏–Ω—Ç—É–∏—Ü–∏—è", "—Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ", "—Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ"],
                "advice": "–¢–≤–æ—Ä—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ —Ä–µ—à–∏—Ç –ª—é–±—ã–µ –ø—Ä–æ–±–ª–µ–º—ã."
            }
        }
    
    def enhance_interpretation(self, cards: list, reading_type: str, user_profile=None) -> str:
        """–°–æ–∑–¥–∞–µ—Ç —É–ª—É—á—à–µ–Ω–Ω—É—é –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é —Å —É—á–µ—Ç–æ–º –ø—Ä–æ—Ñ–∏–ª—è"""
        
        # –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è
        base_interpretation = interpret_cards(cards, reading_type)
        
        # –ï—Å–ª–∏ –Ω–µ—Ç –ø—Ä–æ—Ñ–∏–ª—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –±–∞–∑–æ–≤—É—é –≤–µ—Ä—Å–∏—é
        if not user_profile:
            return base_interpretation
        
        # –°–æ–∑–¥–∞–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
        interpretation = f"üîÆ *{get_reading_title(reading_type)}*\n"
        interpretation += f"‚ú® –î–ª—è: {user_profile.zodiac_sign}\n"
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤—Ä–µ–º—è —Å—É—Ç–æ–∫ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
        current_hour = datetime.datetime.now().hour
        time_context = ""
        if 6 <= current_hour < 12:
            time_context = "üåÖ *–£—Ç—Ä–µ–Ω–Ω—è—è —ç–Ω–µ—Ä–≥–∏—è:* –ë–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –Ω–æ–≤—ã—Ö –Ω–∞—á–∏–Ω–∞–Ω–∏–π."
        elif 12 <= current_hour < 18:
            time_context = "‚òÄÔ∏è *–î–Ω–µ–≤–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è:* –ü–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –∏–¥–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π."
        else:
            time_context = "üåô *–í–µ—á–µ—Ä–Ω—è—è —ç–Ω–µ—Ä–≥–∏—è:* –í—Ä–µ–º—è –¥–ª—è —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π, –∞–Ω–∞–ª–∏–∑–∞ –∏ –æ—Ç–¥—ã—Ö–∞."
        
        interpretation += f"{time_context}\n\n"
        
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—Ç—ã
        for i, card in enumerate(cards, 1):
            orientation_icon = "üîº" if card["orientation"] == "upright" else "üîΩ"
            meaning_type = "–ü—Ä—è–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ" if card["orientation"] == "upright" else "–ü–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ"
            
            interpretation += f"{i}. *{card['name']}* {orientation_icon}\n"
            interpretation += f"   *{meaning_type}:* {card['meaning']}\n\n"
        
        # –ê–Ω–∞–ª–∏–∑ —Ä–∞—Å–∫–ª–∞–¥–∞
        upright_count = sum(1 for card in cards if card["orientation"] == "upright")
        total_cards = len(cards)
        
        analysis = "\nüìä *–ê–Ω–∞–ª–∏–∑ —Ä–∞—Å–∫–ª–∞–¥–∞:*\n"
        
        if upright_count == total_cards:
            analysis += "‚úÖ –í—Å–µ –∫–∞—Ä—Ç—ã –≤ –ø—Ä—è–º–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏ - —Å–∏–ª—å–Ω–∞—è –ø–æ–∑–∏—Ç–∏–≤–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è.\n"
        elif upright_count >= total_cards / 2:
            analysis += "‚öñÔ∏è –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫–∞—Ä—Ç –ø—Ä—è–º—ã–µ - –æ–±—â–∏–π –±–∞–ª–∞–Ω—Å –≤ –≤–∞—à—É –ø–æ–ª—å–∑—É.\n"
        else:
            analysis += "üîÑ –ü—Ä–µ–æ–±–ª–∞–¥–∞—é—Ç –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—ã–µ –∫–∞—Ä—Ç—ã - –≤—Ä–µ–º—è –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–∞–±–æ—Ç—ã.\n"
        
        interpretation += analysis
        
        # –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Å–æ–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞
        zodiac_info = self.zodiac_insights.get(user_profile.zodiac_sign, {
            "strengths": ["–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–∏–ª–∞"],
            "advice": "–°–ª—É—à–∞–π—Ç–µ —Å–≤–æ–µ —Å–µ—Ä–¥—Ü–µ –∏ –∏–Ω—Ç—É–∏—Ü–∏—é."
        })
        
        interpretation += f"\nüí´ *–í–∞—à–∏ —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:* {', '.join(zodiac_info['strengths'])}\n"
        interpretation += f"üåü *–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Å–æ–≤–µ—Ç –¥–ª—è {user_profile.zodiac_sign.split()[-1]}:*\n"
        interpretation += f"{zodiac_info['advice']}\n"
        
        # –û–±—â–∏–π —Å–æ–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–∏–ø–∞ –≥–∞–¥–∞–Ω–∏—è
        interpretation += f"\n‚ú® *–û–±—â–∏–π —Å–æ–≤–µ—Ç –¥–ª—è {get_reading_title(reading_type).lower()}:*\n"
        
        reading_advice = {
            "daily": "–°—Ñ–æ–∫—É—Å–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ –≥–ª–∞–≤–Ω–æ–º, –æ—Å—Ç–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–∏—Ç—Å—è.",
            "love": "–ë—É–¥—å—Ç–µ –∏—Å–∫—Ä–µ–Ω–Ω–∏ –≤ —á—É–≤—Å—Ç–≤–∞—Ö –∏ –æ–∂–∏–¥–∞–Ω–∏—è—Ö.",
            "career": "–ü—Ä–æ—è–≤–∏—Ç–µ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É - —ç—Ç–æ –±—É–¥–µ—Ç –∑–∞–º–µ—á–µ–Ω–æ.",
            "fate": "–í–∞—à–∏ —Ä–µ—à–µ–Ω–∏—è —Å–µ–≥–æ–¥–Ω—è —Ñ–æ—Ä–º–∏—Ä—É—é—Ç –∑–∞–≤—Ç—Ä–∞—à–Ω—é—é —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å."
        }
        
        interpretation += reading_advice.get(reading_type, "–ö–∞—Ä—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –≤—ã–±–æ—Ä –∑–∞ –≤–∞–º–∏.")
        
        # –§–∏–Ω–∞–ª —Å —É—á–µ—Ç–æ–º –∫–∏—Ç–∞–π—Å–∫–æ–≥–æ –∑–Ω–∞–∫–∞
        interpretation += f"\n\nüåå *–ú—É–¥—Ä–æ—Å—Ç—å –∑–≤—ë–∑–¥:*\n"
        interpretation += f"–í–∞—à –∫–∏—Ç–∞–π—Å–∫–∏–π –∑–Ω–∞–∫: {user_profile.chinese_zodiac}\n"
        interpretation += f"–°–µ–≥–æ–¥–Ω—è –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã–π –¥–µ–Ω—å –¥–ª—è –¥–æ–≤–µ—Ä–∏—è –∫ —Å–µ–±–µ –∏ –í—Å–µ–ª–µ–Ω–Ω–æ–π. üí´"
        
        return interpretation

# –ì–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ —á–∏—Ç–∞—Ç–µ–ª—è
enhanced_reader = EnhancedTarotReader()
